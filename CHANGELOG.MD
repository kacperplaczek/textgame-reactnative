# Changelog

## [1.8.4] - 2025-05-01

### Lista Zmian

- Dodano obsÅ‚ugÄ™ PowiadomieÅ„
- Naprawiono bÅ‚Ä…d w wyniku ktÃ³rego powiadomienia przychodziÅ‚y z znacznym opÃ³Åºnieniem wynoszÄ…cym czas oczekiwania ekranu WaitingScreen.
- Naprawiono bÅ‚Ä…d wysyÅ‚ania wiÄ™cej niÅ¼ jednego powiadominienia dla sceny ktÃ³ry generowaÅ‚ siÄ™Â przy ponownym wÅ‚Ä…czaniu siÄ™ sceny.
- Dodano pozwolenia na powiadomienia.
- Zaktualizowano scenariusz do prawidÅ‚owych ustawieÅ„.

### ZakoÅ„czone:

- System powiadomieÅ„.

### Uwagi

Trzeba przetestowaÄ‡ aplikacjÄ™ pod kontem powiadomieÅ„, problem mam z tym, Å¼e powiadomienia pomimo tego iÅ¼ data jest ustawiona z dokÅ‚adnoÅ›ciÄ… co do 20ms to i tak powiadomienie wysyÅ‚ane jest z opÃ³Åºnieniem. Support EXPO poinformowaÅ‚ mnie, Å¼e jest to spowodowane emulatorem EXPO i, Å¼e mam to przetestowaÄ‡ na Produkcji w urzÄ…dzeniu bezpoÅ›rednio.

> Aplikacja przetestowana - powiadomienia na preview wysyÅ‚ajÄ… siÄ™ od 20 do 30 sekund po zakoÅ„czeniu odliczania, opÃ³Åºnienie spowodowane systemem nie grÄ….

---

## [1.8.3] - 2025-04-30

### ğŸ›  Refaktoryzacja

- Podzielenie `CallingScreen` na viewmodel.
- Podzielenie `DeathScreen` na viewmodel.
- UsuniÄ™cie starej konfiguracji `WaitingScreens`.
- Utworzono testy jednostkowe dla wszystkich ekranÃ³w w `screens/` oraz dla wszystkich komponentÃ³w z `components/buttons/`
- Aktualizacja UI dla ekranu `DeathScreen`
- Zaimplementowanie logiki `useDarnkessUI` do `useGameEngine`.

### ZakoÅ„czone:

- ZakoÅ„czono dzielenie kodu na ViewModele.
- Utworzenie testÃ³w jednostkowych
- Prowadzenie Changeloga projektu
- Utworzenie Stora - Context w context/
- System obsÅ‚ugi dÅºwiÄ™ku
- WÅ‚Ä…czanie / wyÅ‚Ä…czanie ciemnoÅ›ci w grze

### Uwagi

**Wynik testÃ³w jednostkowych to:**

> Test Suites: 7 passed, 7 total
> Tests: 14 passed, 14 total
> Snapshots: 0 total
> Time: 1.41 s, estimated 2 s
> Ran all test suites.

---

## [1.8.2] - 2025-04-29

### ğŸ›  Refaktoryzacja

- Dodano Context API dla LanguageContext.tsx - obsÅ‚uga i przechowywanie informacji o jÄ™zyku.
- Zaktualizowano index.tsx oraz \_layout.tsx (Root Layout) pod nowe Context API dla LanguageContext.
- Utworzono caÅ‚kowicie nowy system kontroli dÅºwiÄ™ku ktÃ³ry zostaÅ‚ juÅ¼ zaimplementowany do \_layout.tsx, GameMenu.tsx, CallingScreen.tsx,
- Utworzono ustawienia odrÄ™bnie dla dÅºwiÄ™ku oraz muzyki w tle.

### **Do przetestowania:**

- SprawdziÄ‡ czy teraz po usuniÄ™ciu parametru `"orientation": "portrait"` ekran na iPAD dalej siÄ™ obraca.
  > ZostaÅ‚o to wczeÅ›niej sprawdzone na tablecie Samsung Galaxy - ekran nie obraca siÄ™.

> **Uwagi:**
> Commity o ID: 083b5dd, bf93000, a3071f9 wystÄ…piÅ‚y z bÅ‚Ä™du GIT na moim komputerze. OpisaÅ‚em sytuacjÄ™ na WhatsApp wiÄ™c pozwole sobie przekopiowaÄ‡ tutaj treÅ›Ä‡ wiadomoÅ›ci:

_TreÅ›Ä‡ wiadomoÅ›ci z WHATSAPP_:
Witam chciaÅ‚bym poinformowaÄ‡ o tych 3 commitach, wystÄ…piÅ‚ u mnie problem z githubem gdy chciaÅ‚em pozmieniaÄ‡ nazwy nagle wywaliÅ‚o mi bÅ‚Ä™dami, nie daÅ‚o siÄ™ zapisywaÄ‡ plikÃ³w a na sam koniec wywaliÅ‚o mnie z brancha na pojedyÅ„czego commita.....
Dlatego wrÃ³ciÅ‚em do projektu raz jeszcze, switchnÄ…Å‚em siÄ™ na branch dev i pushnÄ…Å‚em to co miaÅ‚em zwiÄ…zane z Context API.
UwzglÄ™dnie to w uwagach przy changelog.

> Te 3 commity odnoszÄ… siÄ™ do zmiany z Context API tj. podpiÄ™cie HomeScreen, PrologScreen, HistoryScreen ViewModels pod LanguageContext.tsx.

---

## [1.8.1] - 2025-04-28

### ğŸ›  Refaktoryzacja

- UsuniÄ™to `getSuffix` z kodu, nie jest juÅ¼ potrzebny.
- UsuniÄ™to `DialogueController`, nie byÅ‚ juÅ¼ obsÅ‚ugiwany przez aktualny kod.
- UsuniÄ™to `useLanguage.ts`, zostaÅ‚ zastÄ…piony modelem `LanguageController.ts`
- UsuniÄ™to stary folder `translations/`, tÅ‚umaczenia zostaÅ‚y przeniesione do i18n/
- Przeniesiono `LoadInterestialAd` oraz `LoadBannerAd` do `servies/`
- Przeniesienie getCurrentAct do `services/`
- UsuniÄ™to parametr `"orientation": "portrait",` z app.json aby usunÄ…Ä‡ prawdopodobne kolidowanie z moduÅ‚em `expo-screen-orientation`
- Przeniesienie `settings/` do gÅ‚ownej struktury projektu.
- Przeniesienie `NPCData.ts` do `settings/`
- UsuniÄ™cie reszty niepotrzebnego kodu z `lib/` oraz przeniesienie ustawieÅ„ ekranÃ³w z `lib/screens/` do `settings/screens`
- Utworzono nowy `viewmodel` o nazwie `useDialogue`.
- UsuniÄ™cie `getLoggera` z projektu z powodu braku kompatybilnoÅ›ci podczas renderowania komponentÃ³w.
- Utworzono nowy `viewmodel` dla ekranu `app/index.tsx` zwanego potocznie `HomeScreen`
- Utworzono nowy `viewmodel` dla ekranu `app/prolog/index.tsx` zwanego potocznie `PrologScreen`
- UsuniÄ™to w `/app/game/` folder `_components/` ktÃ³ry sÅ‚uÅ¼yÅ‚ wczeÅ›niej jako folder dla dedykowanych komponentÃ³w
- Utworzono nowy `viewmodel` dla ekranu `app/history/index.tsx` zwanego potocznie `HistoryScreen`

### **Do przetestowania:**

SprawdziÄ‡ czy teraz po usuniÄ™ciu parametru `"orientation": "portrait"` ekran na iPAD dalej siÄ™ obraca.

- ZostaÅ‚o to wczeÅ›niej sprawdzone na tablecie Samsung Galaxy - ekran nie obraca siÄ™. \*

> **Uwagi:**
> W nadchodzÄ…cej wersji 1.8.2 zostanÄ… dodane Context API do przechowywania stanu gry.
> Dodatkowo utworzÄ™ jeszcze nowy kontroler dÅºwiÄ™ku.

---

## [1.8.0] - 2025-04-27

### âœ¨ Nowe funkcje

- Utworzono strukturÄ™ katalogÃ³w `/components/`, `/screens/`, `/hooks/`, `/services/`, `/viewmodels/`, `/store/`, `/context/`, `/models/`, `/utils/`, `/i18n/`.
- Przeniesiono tÅ‚umaczenia aplikacji do `/i18n/translations.ts`.

### ğŸ›  Refaktoryzacja

- Przebudowa komponentÃ³w `GameMenu`, `ActsSwitch`, `DialogueBox` wedÅ‚ug architektury MVVM â€” logika zostaÅ‚a przeniesiona do osobnych ViewModeli.
- Utworzenie `useGameMenuViewModel.ts`, `useActsSwitchViewModel.ts`, `useDialogueBoxViewModel.ts`.
- Przeniesiono logikÄ™ gry (`useGameEngine.ts`) do folderu `/hooks/`.
- Przeniesiono funkcje pomocnicze (`scenarioLoader`, `soundController`, `saveToHistory`, `schedulePushNotification`) do `/services/`.
- Przygotowanie folderu `/store/` pod implementacjÄ™ globalnego store'a (Zustand lub Context API).
- Przygotowanie folderu `/models/` na przyszÅ‚e modele danych i typy.

### ğŸ§¹ Czyszczenie projektu

- UsuniÄ™to niepotrzebne, stare foldery (`_components/`, stare ekrany Å›mierci i koÅ„ca aktu).
- Przeniesiono komponenty przyciskÃ³w (`ActsSwitch`, `GameMenu`, `OptionsBox`) do `/components/buttons/`.
- Zaktualizowano `.gitignore` â€” dodano ignorowanie plikÃ³w `.zip`.

### ğŸ§ª Przygotowanie do testÃ³w

- Przygotowano strukturÄ™ `/__tests__/` pod sanity-checki i testy jednostkowe gÅ‚Ã³wnych komponentÃ³w.

### ğŸ›¡ StabilnoÅ›Ä‡

- WstÄ™pna blokada rotacji ekranu poprzez ustawienia w `app.json`.
- Przygotowanie miejsca na dodatkowÄ… obsÅ‚ugÄ™ `ScreenOrientation` w runtime.

---

> **Uwagi:**  
> Wersja 1.8.0 obejmuje duÅ¼e zmiany strukturalne i wprowadzenie architektury MVVM do kluczowych komponentÃ³w.  
> Prace nad uzupeÅ‚nieniem globalnego store'a i testÃ³w jednostkowych sÄ… zaplanowane na kolejne commity.

---

## [1.7.0] - 2025-04-21

### âœ¨ Nowe funkcje

- PeÅ‚na kompatybilnoÅ›Ä‡ Android, zakoÅ„czone wszystkie akty, poprawne dziaÅ‚anie funkcji.
- Dodano nowy widok `/game` w wersji alpha.
- Utworzono loader dla reklam Interstitial.
- Utworzono helper do pobierania aktualnego aktu.
- Utworzono silnik gry `useGameEngine.ts`.
- Utworzono loader scenariuszy.
- Utworzono kontroler dÅºwiÄ™kÃ³w.

### ğŸ›  Refaktoryzacja i poprawki

- UsuniÄ™to niepotrzebne layouty i stare konfiguracje.
- Utworzono nowÄ… konfiguracjÄ™ aktÃ³w.
- Zaktualizowano Main Layout.
- Aktualizacja komponentÃ³w i poprawa kodu.
- Dodano logger dla konsoli.

---

## [1.6.9] - 2025-04-18

### âœ¨ Nowe funkcje

- Utworzono folder `viewmodels/` z ActsSwitch, GameMenu, DialogueBox, HomeScreen, PrologScreen, HistoryScreen.
- Utworzono podfolder `buttons/` w `components/`.
- Dodano eksport zmiennej z ID bannerÃ³w.
- Dodano funkcjÄ™ zapisu danych gry do cache.
- Utworzono helper do przywracania stanu gry.
- Utworzono nowÄ… Å›cieÅ¼kÄ™ historii.

### ğŸ›  Refaktoryzacja i poprawki

- Przeniesiono ekrany z `_components/` do `screens/`.
- Poprawiono odÅ›wieÅ¼anie stanu gry.
- Drobne poprawki w kodzie.
- Poprawki scenariuszy.
- Aktualizacja importÃ³w w projekcie.
- UsuniÄ™to stary kod gry.

---

## [1.6.8] - 2025-04-14

### âœ¨ Nowe funkcje

- Utworzono argument `scenario` w konfiguracji aktÃ³w.
- Utworzono gÅ‚Ã³wny loader reklam bannerowych.
- Utworzono hook dla ciemnego motywu gry.
- Utworzono obsÅ‚ugÄ™ dialogÃ³w, opcji wyboru i menedÅ¼er scen.

### ğŸ›  Refaktoryzacja i poprawki

- Aktualizacja komponentÃ³w i poprawa kodu.
- UsuniÄ™to niepotrzebne layouty.
- Aktualizacja Main Layout.
- Aktualizacja scenariuszy.

---

## [1.6.7] - 2025-04-10

### âœ¨ Nowe funkcje

- Utworzono testy jednostkowe dla ActsSwitch, GameMenu, OptionBox, WaitingScreen, SpecialSceneOverlay, CallingScreen, DeathScreens.

### ğŸ›  Poprawki

- Drobne poprawki kodu.
- Zakomentowano console.log dla zaÅ‚adowanych scen.

---

## [1.6.6] - 2025-04-05

### âœ¨ Nowe funkcje

- Utworzono system WaitingScreenContext API.
- Utworzono DarknessUI Context.
- Zaktualizowano Root Layout pod WaitingScreenContext.

### ğŸ›  Poprawki

- Sprawdzanie czasu gry i usuwanie ekranu po zakoÅ„czeniu czasu.
- Poprawa CallingScreen i GameMenu pod nowe API.

---

## [1.6.5] - 2025-03-28

### âœ¨ Nowe funkcje

- Utworzono akt 3 scenariusza.
- Dodano obsÅ‚ugÄ™ zamkÃ³w Å¼eÅ„skich/mÄ™skich.
- Dodano obsÅ‚ugÄ™ dialogÃ³w dla nowych NPC.
- Utworzono komponent DeathScreens.

### ğŸ›  Poprawki

- UsuniÄ™to zbÄ™dne pliki.
- Poprawa wyÅ›wietlania ekranÃ³w oczekiwania.
- Poprawa bÅ‚Ä™dÃ³w w kodzie.

---

## [1.6.4] - 2025-03-20

### âœ¨ Nowe funkcje

- Utworzono helper dla scenariusza (czasy, statusy, zmiana koloru UI).
- Utworzono specjalne ekrany (Special Screen, NotifyScreen).
- Utworzono nowe zdjÄ™cia NPC.

### ğŸ›  Poprawki

- Naprawiono bÅ‚Ä™dy w scenariuszach.
- Naprawiono Å›cieÅ¼ki, indeksy, start gry.
- UsuniÄ™to niepotrzebne pliki.
- Poprawiono prolog.

---

## [1.6.3] - 2025-03-15

### âœ¨ Nowe funkcje

- ObsÅ‚uga testowego aktu 1.
- Utworzono obsÅ‚ugÄ™ END ACT SCENES i DEF/ACT SCREEN SCENES.
- Utworzono funkcjÄ™ oczekiwania (WaitingScreen).

### ğŸ›  Poprawki

- Poprawa kodu oczekiwania.
- Aktualizacja app.json.
- Poprawa UI DeathScreens.
- Aktualizacja checkpointÃ³w.
- Poprawa obsÅ‚ugi dÅºwiÄ™ku i muzyki.

---

## [1.6.2] - 2025-03-10

### âœ¨ Nowe funkcje

- Dodano obsÅ‚ugÄ™ muzyki (Å‚Ä…czonej i w menu).
- Dodano kontroler muzyki i listÄ™ w settings.
- Utworzono szkielet GameMenu.
- Utworzono warstwÄ™ testowÄ… dla aktÃ³w.
- Utworzono akt startowy.
- Utworzono kontrolÄ™ oczekiwania z postÄ™pem.

### ğŸ›  Poprawki

- Naprawa prologu.
- Poprawa bÅ‚Ä™dÃ³w w dialogach.
- UsuniÄ™to zbÄ™dny kod.
