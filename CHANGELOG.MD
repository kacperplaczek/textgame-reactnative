# Changelog

## [1.8.4] - 2025-05-01

### Lista Zmian

- Dodano obsÅ‚ugÄ™ PowiadomieÅ„
- Naprawiono bÅ‚Ä…d w wyniku ktÃ³rego powiadomienia przychodziÅ‚y z znacznym opÃ³Åºnieniem wynoszÄ…cym czas oczekiwania ekranu WaitingScreen.
- Naprawiono bÅ‚Ä…d wysyÅ‚ania wiÄ™cej niÅ¼ jednego powiadominienia dla sceny ktÃ³ry generowaÅ‚ siÄ™Â przy ponownym wÅ‚Ä…czaniu siÄ™ sceny.
- Dodano pozwolenia na powiadomienia.
- Zaktualizowano scenariusz do prawidÅ‚owych ustawieÅ„.

### ZakoÅ„czone:

- System powiadomieÅ„.

### Uwagi

Trzeba przetestowaÄ‡ aplikacjÄ™ pod kontem powiadomieÅ„, problem mam z tym, Å¼e powiadomienia pomimo tego iÅ¼ data jest ustawiona z dokÅ‚adnoÅ›ciÄ… co do 20ms to i tak powiadomienie wysyÅ‚ane jest z opÃ³Åºnieniem. Support EXPO poinformowaÅ‚ mnie, Å¼e jest to spowodowane emulatorem EXPO i, Å¼e mam to przetestowaÄ‡ na Produkcji w urzÄ…dzeniu bezpoÅ›rednio.

> Aplikacja przetestowana - powiadomienia na preview wysyÅ‚ajÄ… siÄ™ od 20 do 30 sekund po zakoÅ„czeniu odliczania, opÃ³Åºnienie spowodowane systemem nie grÄ….

---

## [1.8.3] - 2025-04-30

### ğŸ›  Refaktoryzacja

- Podzielenie `CallingScreen` na viewmodel.
- Podzielenie `DeathScreen` na viewmodel.
- UsuniÄ™cie starej konfiguracji `WaitingScreens`.
- Utworzono testy jednostkowe dla wszystkich ekranÃ³w w `screens/` oraz dla wszystkich komponentÃ³w z `components/buttons/`
- Aktualizacja UI dla ekranu `DeathScreen`
- Zaimplementowanie logiki `useDarnkessUI` do `useGameEngine`.

### ZakoÅ„czone:

- ZakoÅ„czono dzielenie kodu na ViewModele.
- Utworzenie testÃ³w jednostkowych
- Prowadzenie Changeloga projektu
- Utworzenie Stora - Context w context/
- System obsÅ‚ugi dÅºwiÄ™ku
- WÅ‚Ä…czanie / wyÅ‚Ä…czanie ciemnoÅ›ci w grze

### Uwagi

**Wynik testÃ³w jednostkowych to:**

> Test Suites: 7 passed, 7 total
> Tests: 14 passed, 14 total
> Snapshots: 0 total
> Time: 1.41 s, estimated 2 s
> Ran all test suites.

---

## [1.8.2] - 2025-04-29

### ğŸ›  Refaktoryzacja

- Dodano Context API dla LanguageContext.tsx - obsÅ‚uga i przechowywanie informacji o jÄ™zyku.
- Zaktualizowano index.tsx oraz \_layout.tsx (Root Layout) pod nowe Context API dla LanguageContext.
- Utworzono caÅ‚kowicie nowy system kontroli dÅºwiÄ™ku ktÃ³ry zostaÅ‚ juÅ¼ zaimplementowany do \_layout.tsx, GameMenu.tsx, CallingScreen.tsx,
- Utworzono ustawienia odrÄ™bnie dla dÅºwiÄ™ku oraz muzyki w tle.

### **Do przetestowania:**

- SprawdziÄ‡ czy teraz po usuniÄ™ciu parametru `"orientation": "portrait"` ekran na iPAD dalej siÄ™ obraca.
  > ZostaÅ‚o to wczeÅ›niej sprawdzone na tablecie Samsung Galaxy - ekran nie obraca siÄ™.

> **Uwagi:**
> Commity o ID: 083b5dd, bf93000, a3071f9 wystÄ…piÅ‚y z bÅ‚Ä™du GIT na moim komputerze. OpisaÅ‚em sytuacjÄ™ na WhatsApp wiÄ™c pozwole sobie przekopiowaÄ‡ tutaj treÅ›Ä‡ wiadomoÅ›ci:

_TreÅ›Ä‡ wiadomoÅ›ci z WHATSAPP_:
Witam chciaÅ‚bym poinformowaÄ‡ o tych 3 commitach, wystÄ…piÅ‚ u mnie problem z githubem gdy chciaÅ‚em pozmieniaÄ‡ nazwy nagle wywaliÅ‚o mi bÅ‚Ä™dami, nie daÅ‚o siÄ™ zapisywaÄ‡ plikÃ³w a na sam koniec wywaliÅ‚o mnie z brancha na pojedyÅ„czego commita.....
Dlatego wrÃ³ciÅ‚em do projektu raz jeszcze, switchnÄ…Å‚em siÄ™ na branch dev i pushnÄ…Å‚em to co miaÅ‚em zwiÄ…zane z Context API.
UwzglÄ™dnie to w uwagach przy changelog.

> Te 3 commity odnoszÄ… siÄ™ do zmiany z Context API tj. podpiÄ™cie HomeScreen, PrologScreen, HistoryScreen ViewModels pod LanguageContext.tsx.

---

## [1.8.1] - 2025-04-28

### ğŸ›  Refaktoryzacja

- UsuniÄ™to `getSuffix` z kodu, nie jest juÅ¼ potrzebny.
- UsuniÄ™to `DialogueController`, nie byÅ‚ juÅ¼ obsÅ‚ugiwany przez aktualny kod.
- UsuniÄ™to `useLanguage.ts`, zostaÅ‚ zastÄ…piony modelem `LanguageController.ts`
- UsuniÄ™to stary folder `translations/`, tÅ‚umaczenia zostaÅ‚y przeniesione do i18n/
- Przeniesiono `LoadInterestialAd` oraz `LoadBannerAd` do `servies/`
- Przeniesienie getCurrentAct do `services/`
- UsuniÄ™to parametr `"orientation": "portrait",` z app.json aby usunÄ…Ä‡ prawdopodobne kolidowanie z moduÅ‚em `expo-screen-orientation`
- Przeniesienie `settings/` do gÅ‚ownej struktury projektu.
- Przeniesienie `NPCData.ts` do `settings/`
- UsuniÄ™cie reszty niepotrzebnego kodu z `lib/` oraz przeniesienie ustawieÅ„ ekranÃ³w z `lib/screens/` do `settings/screens`
- Utworzono nowy `viewmodel` o nazwie `useDialogue`.
- UsuniÄ™cie `getLoggera` z projektu z powodu braku kompatybilnoÅ›ci podczas renderowania komponentÃ³w.
- Utworzono nowy `viewmodel` dla ekranu `app/index.tsx` zwanego potocznie `HomeScreen`
- Utworzono nowy `viewmodel` dla ekranu `app/prolog/index.tsx` zwanego potocznie `PrologScreen`
- UsuniÄ™to w `/app/game/` folder `_components/` ktÃ³ry sÅ‚uÅ¼yÅ‚ wczeÅ›niej jako folder dla dedykowanych komponentÃ³w
- Utworzono nowy `viewmodel` dla ekranu `app/history/index.tsx` zwanego potocznie `HistoryScreen`

### **Do przetestowania:**

SprawdziÄ‡ czy teraz po usuniÄ™ciu parametru `"orientation": "portrait"` ekran na iPAD dalej siÄ™ obraca.

- ZostaÅ‚o to wczeÅ›niej sprawdzone na tablecie Samsung Galaxy - ekran nie obraca siÄ™. \*

> **Uwagi:**
> W nadchodzÄ…cej wersji 1.8.2 zostanÄ… dodane Context API do przechowywania stanu gry.
> Dodatkowo utworzÄ™ jeszcze nowy kontroler dÅºwiÄ™ku.

---

## [1.8.0] - 2025-04-27

### âœ¨ Nowe funkcje

- Utworzono strukturÄ™ katalogÃ³w `/components/`, `/screens/`, `/hooks/`, `/services/`, `/viewmodels/`, `/store/`, `/context/`, `/models/`, `/utils/`, `/i18n/`.
- Przeniesiono tÅ‚umaczenia aplikacji do `/i18n/translations.ts`.

### ğŸ›  Refaktoryzacja

- Przebudowa komponentÃ³w `GameMenu`, `ActsSwitch`, `DialogueBox` wedÅ‚ug architektury MVVM â€” logika zostaÅ‚a przeniesiona do osobnych ViewModeli.
- Utworzenie `useGameMenuViewModel.ts`, `useActsSwitchViewModel.ts`, `useDialogueBoxViewModel.ts`.
- Przeniesiono logikÄ™ gry (`useGameEngine.ts`) do folderu `/hooks/`.
- Przeniesiono funkcje pomocnicze (`scenarioLoader`, `soundController`, `saveToHistory`, `schedulePushNotification`) do `/services/`.
- Przygotowanie folderu `/store/` pod implementacjÄ™ globalnego store'a (Zustand lub Context API).
- Przygotowanie folderu `/models/` na przyszÅ‚e modele danych i typy.

### ğŸ§¹ Czyszczenie projektu

- UsuniÄ™to niepotrzebne, stare foldery (`_components/`, stare ekrany Å›mierci i koÅ„ca aktu).
- Przeniesiono komponenty przyciskÃ³w (`ActsSwitch`, `GameMenu`, `OptionsBox`) do `/components/buttons/`.
- Zaktualizowano `.gitignore` â€” dodano ignorowanie plikÃ³w `.zip`.

### ğŸ§ª Przygotowanie do testÃ³w

- Przygotowano strukturÄ™ `/__tests__/` pod sanity-checki i testy jednostkowe gÅ‚Ã³wnych komponentÃ³w.

### ğŸ›¡ StabilnoÅ›Ä‡

- WstÄ™pna blokada rotacji ekranu poprzez ustawienia w `app.json`.
- Przygotowanie miejsca na dodatkowÄ… obsÅ‚ugÄ™ `ScreenOrientation` w runtime.

---

> **Uwagi:**  
> Wersja 1.8.0 obejmuje duÅ¼e zmiany strukturalne i wprowadzenie architektury MVVM do kluczowych komponentÃ³w.  
> Prace nad uzupeÅ‚nieniem globalnego store'a i testÃ³w jednostkowych sÄ… zaplanowane na kolejne commity.

---

## [1.7.0] - 2025-04-26

### âœ¨ Nowe funkcje

- Dodano peÅ‚nÄ… kompatybilnoÅ›Ä‡ z Androidem.
- UkoÅ„czono wszystkie akty gry.
- Poprawiono UI w wielu miejscach.

### ğŸ›  Refaktoryzacja i poprawki

- Naprawiono WaitingScreen, NotifyScreen, GameMenu, ActsSwitch.
- Zakomentowano pokazywanie czasu na WaitingScreenOverlay.
- Zaktualizowano pliki konfiguracyjne, w tym `.gitignore`.
- Poprawiono historiÄ™ czatÃ³w.

### ğŸ“¦ Inne

- Dodano nowe grafiki.

---

## [1.6.8] - 2025-04-24

### âœ¨ Nowe funkcje

- Dodano przeÅ‚Ä…czniki (Switch) aktÃ³w.
- Ulepszono historiÄ™ czatÃ³w.

### ğŸ›  Poprawki UI i bÅ‚Ä™dÃ³w

- Naprawiono bÅ‚Ä™dy WaitingScreen.
- Poprawiono wyÅ›wietlanie ekranÃ³w oczekiwania.
- Poprawiono tÅ‚umaczenia (translations.ts, PrivacyText).
- Poprawiono wyglÄ…d GameMenu.
- Aktualizacja Å›cieÅ¼ek importÃ³w.

---

## [1.6.7] - 2025-04-22

### âœ¨ Nowe funkcje

- Utworzono loader dla reklam typu Interstitial.
- Dodano nowy widok `/game` do odgrywania caÅ‚ej gry.
- Utworzono helper do pobierania aktualnego aktu.
- Utworzono kontroler dÅºwiÄ™kÃ³w i obsÅ‚ugÄ™ dialogÃ³w.
- Utworzono manager scen i hook dla ciemnego motywu gry.

### ğŸ›  Refaktoryzacja

- Utworzono gÅ‚Ã³wny loader dla reklam bannerowych.
- Przeniesiono komponenty gry i poprawiono kod.
- Dodano helper do przywracania stanu gry.
- Dodano obsÅ‚ugÄ™ zapisu danych gry do cache.
- Dodano odÅ›wieÅ¼anie stanu gry i wykrywanie zmian.

---

## [1.6.6] - 2025-04-20

### âœ¨ Struktura projektu

- Przeniesiono ekrany z `_components/` do `screens/`.
- Utworzono podfolder `buttons/` w `components/`.
- Utworzono folder `viewmodels/` i dodano modele ActsSwitch i GameMenu.
- UsuniÄ™to stare foldery ekranu Å›mierci i koÅ„ca aktu.
- Aktualizacja `.gitignore` (dodano \*.zip).
- Utworzono `viewmodel` dla DialogueBox, HomeScreen, PrologScreen, HistoryScreen.

### ğŸ›  Refaktoryzacja i czyszczenie

- Przeniesiono pliki do `services/`, `i18n/`, `models/`, `hooks/`.
- UsuniÄ™to folder `lib/` i stare skrypty.
- Aktualizacja importÃ³w w caÅ‚ym projekcie.

---

## [1.6.5] - 2025-04-18

### âœ¨ Testy jednostkowe

- Utworzono testy dla ActsSwitch, GameMenu, OptionBox, WaitingScreen, SpecialSceneOverlay, CallingScreen, DeathScreens.

### ğŸ›  Poprawki

- Dodano konfiguracjÄ™ `jest` i mocki dla `expo-av`.
- Poprawiono UI DeathScreen.
- Dodano obsÅ‚ugÄ™ DarknessUI w silniku gry.
- Poprawiono logikÄ™ wÅ‚Ä…czania/wyÅ‚Ä…czania DarknessUI.

---

## [1.6.4] - 2025-04-16

### âœ¨ Powiadomienia

- Dodano proÅ›bÄ™ o zgodÄ™ na wysyÅ‚anie powiadomieÅ„ w `_layout.tsx`.
- Dodano obsÅ‚ugÄ™ przechowywania danych o powiadomieniu.
- Zaktualizowano silnik gry pod usuwanie danych powiadomieÅ„.
- Dodano debugowanie w `schedulePushNotifications.ts`.

### ğŸ›  Poprawki

- Zaktualizowano CallingScreen pod kontroler dÅºwiÄ™ku i LanguageContext.
- Utworzono ustawienia assetÃ³w dla dÅºwiÄ™ku.
- Dodano obsÅ‚ugÄ™ ustawieÅ„ dÅºwiÄ™ku w GameMenuViewModel.
- Zaktualizowano tÅ‚umaczenia.

---

## [1.6.3] - 2025-04-14

### âœ¨ Context API

- Utworzono Context API dla WaitingScreen i DarknessUI.
- PodpiÄ™to WaitingScreen pod nowy ContextAPI.
- Dodano obsÅ‚ugÄ™ WaitingScreenContext w Root Layout.

### ğŸ›  Poprawki

- Dodano sprawdzanie czasu gry i usuwanie ekranu po zakoÅ„czeniu czasu.
- Zakomentowano console.log dla zaÅ‚adowanych scen.
- Utworzono testy jednostkowe dla ActsSwitch i GameMenu.
